<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ICD Cost Estimator™</title>

  <!-- Meta -->
  <meta name="description" content="Planning-level budgeting tool for Insulated Concrete Domes (ICD). All client-side; no data leaves your browser." />
  <meta name="theme-color" content="#0f172a" />

  <!-- Styles -->
  <link rel="stylesheet" href="./icdce.css" />
</head>
<body>
<div id="icdce">
  <!-- Unlock toast -->
  <div id="icdce_unlocked" aria-live="polite" role="status">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
      <path d="M20 6L9 17l-5-5" stroke="#065f46" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span>PDF export unlocked — you can now download.</span>
    <button id="icdce_unlocked_btn" class="_btn _good" style="padding:6px 12px;font-size:12px;">Download PDF</button>
  </div>

  <div class="_wrap">
    <!-- Brand bar -->
    <div class="_brandbar">
      <div class="_brandleft">
        <div class="_mark">ICD Cost Estimator<span>™</span></div>
        <div class="_tagline">Planning-level budgeting for Insulated Concrete Domes</div>
      </div>
      <span class="_pill">Client-side • No data leaves your browser</span>
    </div>

    <!-- Main Panel -->
    <div class="_panel" role="region" aria-label="ICD Cost Estimator">

      <!-- Project Basics -->
      <section class="_section _section--boxed _project-basics" aria-labelledby="s_projectBasics">
        <h2 id="s_projectBasics" class="_sectionTitle">Project Basics</h2>
        <div class="_grid">
          <div class="_field">
            <label class="_label" for="ce_sf">Conditioned SF</label>
            <input id="ce_sf" class="_input" type="number" min="0" step="50" placeholder="e.g., 2000" />
            <div class="_hint">Total conditioned square footage.</div>
          </div>

          <div class="_field">
            <label class="_label" for="ce_region">Region</label>
            <select id="ce_region" class="_input">
              <option value="1.00">Standard (1.00)</option>
              <option value="0.90">Low-cost (0.90)</option>
              <option value="1.15">High-cost metro (1.15)</option>
              <option value="1.30">Very high (1.30)</option>
            </select>
            <div class="_hint">Rural/smaller markets → Low-cost; coastal/big metros → Very high.</div>
          </div>

          <div class="_field">
            <label class="_label" for="ce_diameter">Dome Diameter (ft)</label>
            <input id="ce_diameter" class="_input" type="number" min="20" step="1" placeholder="e.g., 50" />
            <div class="_hint">Used for planning-level checks.</div>
          </div>

          <div class="_field _wide">
            <label class="_label" for="ce_regionIdx">Region Cost Index (fine-tune)</label>
            <div class="_inline _compact">
              <input id="ce_regionIdx" class="_input _sm" type="range" min="0.80" max="1.40" step="0.01" value="1.00" list="ce_regionTicks" />
              <span class="_badge _sm" id="ce_regionIdxVal">1.00</span>
            </div>
            <datalist id="ce_regionTicks">
              <option value="0.80"></option><option value="0.90"></option><option value="1.00"></option>
              <option value="1.10"></option><option value="1.20"></option><option value="1.30"></option><option value="1.40"></option>
            </datalist>
            <div class="_ticks _sm"><span>0.80</span><span>0.90</span><span>1.00</span><span>1.10</span><span>1.20</span><span>1.30</span><span>1.40</span></div>
            <div class="_hint">Slide until Base Shell $/SF roughly matches your recent jobs.</div>
          </div>
        </div>
      </section>

      <!-- Design & Envelope -->
      <section class="_section _section--boxed _design-envelope" aria-labelledby="s_designEnv">
        <h2 id="s_designEnv" class="_sectionTitle">Design &amp; Envelope</h2>
        <div class="_grid">
          <div class="_field">
            <label class="_label" for="ce_finish">Finish Level</label>
            <select id="ce_finish" class="_input">
              <option value="0.95">Economy</option>
              <option value="1.00" selected>Standard</option>
              <option value="1.20">Premium</option>
              <option value="1.35">Luxury</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_domes">Number of Domes</label>
            <select id="ce_domes" class="_input">
              <option value="1" selected>1</option>
              <option value="2">2</option>
              <option value="3">3+</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_height">Shell Height</label>
            <select id="ce_height" class="_input">
              <option value="std" selected>Standard</option>
              <option value="tall">Tall</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_glazing">Glazing %</label>
            <select id="ce_glazing" class="_input">
              <option value="0.10">10%</option>
              <option value="0.20" selected>20%</option>
              <option value="0.30">30%</option>
              <option value="0.40">40%</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_basement">Basement</label>
            <select id="ce_basement" class="_input">
              <option value="none" selected>None</option>
              <option value="partial">Partial (~50%)</option>
              <option value="full">Full (~100%)</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_shellThk">Shell Thickness (in)</label>
            <select id="ce_shellThk" class="_input">
              <option value="4" selected>4″</option>
              <option value="5">5″</option>
              <option value="6">6″</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_mixType">Mix Type</label>
            <select id="ce_mixType" class="_input">
              <option value="std" selected>Standard</option>
              <option value="pozz">Pozzolan</option>
              <option value="hemp">Hempcrete</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_oculusCount">Oculus / Skylights</label>
            <input id="ce_oculusCount" class="_input" type="number" min="0" step="1" value="0" />
          </div>

          <div class="_field">
            <label class="_label" for="ce_connector">Connector / Tunnel</label>
            <select id="ce_connector" class="_input">
              <option value="none" selected>None</option>
              <option value="short">Short</option>
              <option value="med">Medium</option>
              <option value="long">Long</option>
            </select>
          </div>
        </div>
      </section>

      <!-- Site & Systems -->
      <section class="_section _section--boxed _site-systems" aria-labelledby="s_siteSystems">
        <h2 id="s_siteSystems" class="_sectionTitle">Site &amp; Systems</h2>
        <div class="_grid">
          <div class="_field">
            <label class="_label" for="ce_site">Site Conditions</label>
            <select id="ce_site" class="_input">
              <option value="flat" selected>Flat / Easy</option>
              <option value="moderate">Moderate</option>
              <option value="complex">Complex / Remote</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_mep">MEP Complexity</label>
            <select id="ce_mep" class="_input">
              <option value="simple">Simple</option>
              <option value="standard" selected>Standard</option>
              <option value="advanced">Advanced</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_baths">Bathrooms</label>
            <input id="ce_baths" class="_input" type="number" min="1" step="1" value="2" />
          </div>

          <div class="_field">
            <label class="_label" for="ce_incSitework">
              <input type="checkbox" id="ce_incSitework" checked /> Include Sitework
            </label>
          </div>
        </div>

        <h3 class="_sectionSubtitle">Optional Systems</h3>
        <div class="_inline-stack">
          <label><input type="checkbox" id="ce_optSolar" /> Solar PV</label>
          <label><input type="checkbox" id="ce_optStorage" /> Battery Storage</label>
          <label><input type="checkbox" id="ce_optGeo" /> Geothermal</label>
          <label><input type="checkbox" id="ce_optRain" /> Rainwater / Cistern</label>
          <label><input type="checkbox" id="ce_optSeptic" /> Septic</label>
          <label><input type="checkbox" id="ce_optHydronic" /> Hydronic Floors</label>
          <label><input type="checkbox" id="ce_optDriveway" /> Driveway</label>
        </div>
        <div class="_field _wide">
          <label class="_label" for="ce_driveLen">Driveway Length (ft)</label>
          <input id="ce_driveLen" class="_input" type="number" min="0" step="10" value="0" disabled />
        </div>
      </section>

      <!-- Other Site Factors -->
      <section class="_section _section--boxed _other-factors" aria-labelledby="s_otherFactors">
        <h2 id="s_otherFactors" class="_sectionTitle">Other Site Factors</h2>
        <div class="_grid">
          <div class="_field">
            <label class="_label" for="ce_remote">Remote Access</label>
            <select id="ce_remote" class="_input">
              <option value="easy" selected>Easy</option>
              <option value="moderate">Moderate</option>
              <option value="remote">Remote</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_inflationPower">Inflation Power</label>
            <select id="ce_inflationPower" class="_input">
              <option value="onsite" selected>On-site Power</option>
              <option value="generator">Generator Rental</option>
            </select>
          </div>

          <div class="_field">
            <label class="_label" for="ce_lightning">
              <input type="checkbox" id="ce_lightning" /> Lightning Protection
            </label>
          </div>
        </div>
      </section>

      <!-- Contingency & Actions -->
      <section class="_section _section--boxed _soft-cont" aria-labelledby="s_contingency">
        <h2 id="s_contingency" class="_sectionTitle">Contingency</h2>
        <div class="_grid">
          <div class="_field">
            <label class="_label" for="ce_contPct">Contingency %</label>
            <input id="ce_contPct" class="_input" type="number" min="0" max="100" step="0.1" value="10" />
            <div class="_hint">Estimator applies contingency to the subtotal only.</div>
          </div>
          <div class="_field _full">
            <div class="_inline _actions-mobile">
              <button id="ce_calcBtn" class="_btn" type="button">Calculate</button>
              <button id="ce_clearBtn" class="_btn _secondary" type="button">Clear</button>
              <button id="ce_printBtn" class="_btn _good" type="button">Export PDF</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Results -->
      <div class="_results-pad">
        <div class="_cards">
          <div class="_card" aria-live="polite">
            <h3>Estimated Range</h3>
            <div class="_big" id="ce_rangeTotal">$0 – $0</div>
            <div class="_small" id="ce_rangePerSf">$/SF: $0 – $0</div>
          </div>
          <div class="_card" aria-live="polite">
            <h3>Base Dome Shell</h3>
            <div class="_big" id="ce_baseTotal">$0</div>
            <div class="_small" id="ce_basePsf">$/SF: $0</div>
          </div>
          <div class="_card" aria-live="polite">
            <h3>Sitework &amp; Rough Grading</h3>
            <div class="_big" id="ce_siteworkTotal">$0 – $0</div>
            <div class="_small" id="ce_siteworkNote">Included</div>
          </div>
          <div class="_card" style="grid-column:1 / -1;" aria-live="polite">
            <h3>Assumptions</h3>
            <div class="_small" id="ce_assumptions">Region 1.00 • Standard finish • Typical glazing • Single dome</div>
          </div>
        </div>

        <h3 class="_results-title">Line-Item Breakdown</h3>
        <div class="_panel _breakdown" role="region" aria-label="Line-item breakdown table">
          <table>
            <thead>
              <tr>
                <th>Category</th>
                <th>Description</th>
                <th class="_right">Low</th>
                <th class="_right">High</th>
              </tr>
            </thead>
            <tbody id="ce_breakdown">
              <tr>
                <td colspan="4" class="_muted" style="text-align:center;padding:18px">
                  Run a calculation to see details.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="_disclaimer">
          <strong>Important:</strong> Planning-level estimate only (not a bid). Final costs depend on site, engineering, and trade bids.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- Sticky action bar -->
<div class="_stickybar" id="icdce_sticky" role="region" aria-label="Quick actions">
  <button class="_btn" type="button" onclick="document.getElementById('ce_calcBtn')?.click()">Calculate</button>
  <button class="_btn _secondary" type="button" onclick="document.getElementById('ce_clearBtn')?.click()">Clear</button>
  <button class="_btn _good" type="button" onclick="document.getElementById('ce_printBtn')?.click()">Export PDF</button>
</div>

<!-- Paywall Modal -->
<div id="icdce_paywall" class="_modalBackdrop" aria-hidden="true">
  <div class="_modal" role="dialog" aria-modal="true" aria-labelledby="pw_title">
    <h3 id="pw_title">Export PDF</h3>
    <p>
      Exporting a formatted, two-page PDF is a paid feature. Complete checkout and you’ll be returned here automatically.
    </p>
    <div class="_row _actions-mobile" style="margin-top:8px;">
      <button id="pw_payBtn" class="_btn _good" type="button">Go to Checkout</button>
      <button id="pw_closeBtn" class="_btn _secondary" type="button">Close</button>
    </div>

    <div class="_divider"></div>

    <p class="_hint">Already paid? Enter your access code or use a paid return link:</p>
    <div class="_codeRow _inline">
      <input id="pw_code" class="_input" type="text" placeholder="Access code (optional)" />
      <button id="pw_apply" class="_btn" type="button">Apply Code</button>
    </div>
    <div id="pw_msg" class="_hint" style="margin-top:8px;"></div>
  </div>
</div>

<noscript>Please enable JavaScript to use the ICD Cost Estimator.</noscript>
<script src="./icdce.js"></script>
</body>
</html>
